# AISD: AI Small Docs

**AI-authored, human-reviewed documentation**

---

## The Core Idea

**AISD docs are not written by humans. They're written by AI, reviewed by humans.**

**Traditional workflow**:
```
Human writes docs → AI reads docs → AI generates code
```

**AISD workflow**:
```
Human describes intent → AI writes AISD docs → Human reviews diff → AI generates code from AISD
```

**Key insight**: AISD is AI's **intermediate representation** between human requirements and generated code.

---

## Why This Matters

**The problem with traditional docs**:
- Humans write verbose prose optimized for human reading
- AI extracts requirements from ambiguous text
- Generated code often misses implicit constraints
- Docs become stale (humans forget to update)

**AISD solution**:
- AI digests human intent into structured specs
- Humans review changes in git (approve/reject)
- AI generates code from unambiguous AISD
- AI updates AISD when requirements change

---

## What This Is

**AISD (AI Small Docs)** - Documentation format optimized for AI authorship and AI consumption.

**Core principles**:
- **AI-authored** - Generated by AI from human requirements
- **Human-reviewed** - Version controlled, reviewed in git diffs
- **AI-targeted, human-readable** - Optimized for AI consumption, humans can read
- **Brutal conciseness** - Every word justifies existence (40 chars/line target)
- **Tables over prose** - Structured data, not paragraphs
- **Authoritative language** - MUST/REQUIRED/FORBIDDEN (no ambiguity)
- **Explicit constraints** - "1-200 chars" not "short"
- **Context-aware** - File size limits (200-500 lines) for AI loading

---

## Example Workflow

**Human input** (GitHub issue, conversation, design doc):
> "We need a refund policy. Products can be refunded within 30 days if unused and in original packaging. Block users who abuse refunds (more than 3 in a year)."

**AI generates AISD** (docs/refunds/business-rules.md):
```markdown
## Refund Policy

| Condition | Rule |
|-----------|------|
| Purchase date | MUST be within 30 days |
| Product condition | MUST be unused (verified by serial scan) |
| Original packaging | REQUIRED |
| Refund limit | FORBIDDEN if user has >3 refunds in past 12 months |
```

**Human reviews diff**:
```diff
+ | Refund limit | FORBIDDEN if user has >3 refunds in past 12 months |
```

**Human approves** → Commits to git

**AI generates code** from AISD:
- Database migration for refund tracking
- API endpoint validation logic
- Email template for refund denial

**Benefits**:
- ✅ Unambiguous spec (no "should" or "reasonable")
- ✅ Version controlled (git tracks changes)
- ✅ Token efficient (concise tables, not verbose prose)
- ✅ AI reads what AI wrote (perfect roundtrip)

---

## Format Principles

**Why these principles matter when AI writes docs**:

### 1. Brutal Conciseness
AI doesn't get tired of verbosity, but context windows are finite.

Every word costs tokens. AI generates only essential content.

### 2. Tables Over Prose
AI parses structured data more reliably than prose.

Tables = unambiguous. Prose = interpretation needed.

### 3. Authoritative Language
MUST/REQUIRED/FORBIDDEN removes ambiguity.

AI doesn't interpret "should" the same way twice.

### 4. Explicit Constraints
AI needs exact specifications, not fuzzy concepts.

"1-200 characters" generates correct validation. "Reasonable length" doesn't.

### 5. File Size Limits
200-500 lines per file enables selective loading.

AI loads files programmatically. Small files = flexible context composition.

### 6. Context Precision
Prevents cascade loading and context explosion.

Primitive references = Self-contained files, no chain dependencies (User → Order → Product → ...).

---

## File Structure

### Standard Layout

```
docs/
├── index.md              # System overview (<100 lines)
├── domain-a/
│   ├── index.md          # Domain overview (<100 lines)
│   ├── model.md          # Entities, fields, constraints (200-500 lines)
│   └── behavior.md       # Operations, rules, scenarios (200-500 lines)
└── domain-b/
    ├── index.md
    ├── model.md
    └── behavior.md
```

### File Types

| Type | Size | Purpose | Example |
|------|------|---------|---------|
| Index | <100 lines | Navigation, orientation | `docs/index.md`, `docs/tasks/index.md` |
| Spec | 200-500 lines | Entities, behaviors, tests | `model.md`, `behavior.md` |
| Max | 1000 lines | Hard limit, split if exceeded | N/A |

---

## What AISD Helps With

### Goals:

1. **Reduce hallucinations** - Explicit constraints guide AI
2. **Improve consistency** - Structured docs reduce variability
3. **Optimize context** - Selective loading prevents over-loading
4. **Enable mixed context** - Load tasks/model.md + users/behavior.md (impossible with large files)
5. **Prevent cascade loading** - Self-contained files, no chain dependencies
6. **Catch errors early** - Explicit constraints reveal edge cases

### Expected improvements:

**Before AISD**:
- AI generates 10 different implementations from vague spec
- Code compiles but uses nonexistent APIs
- Large multi-responsibility files force AI to load everything
- Cross-domain references cause cascade loading (User → Order → Product → ...)

**After AISD**:
- AI generates more consistent implementations
- Explicit constraints reduce invalid code
- Small files enable precise loading (load only needed entities)
- Mixed context composition (tasks/model.md + users/behavior.md, skip unneeded files)

**Note**: LLMs use stochastic decoding, so outputs vary between runs. AISD reduces variability but doesn't guarantee identical outputs.

---

## Files in This Standard

| File | Focus | Use |
|------|-------|-----|
| [style-guide.md](style-guide.md) | Writing principles | Language, formatting guidelines |
| [best-practices.md](best-practices.md) | Organization patterns | File structure, context loading |
| [templates/](templates/) | Example templates | TODO - Will demonstrate AISD format |

---

## Quick Start

**Typical workflow**:

1. **Human describes intent** (natural language)
   - GitHub issue, conversation, design doc
   - Example: "Add refund abuse detection - block users with >3 refunds/year"

2. **AI generates AISD** (structured spec)
   - Prompts AI: "Generate AISD business rules doc for this requirement"
   - AI outputs table with explicit constraints

3. **Human reviews diff** (git)
   - `git diff docs/refunds/business-rules.md`
   - Verify AI understood intent correctly

4. **Human commits** (approval)
   - `git commit -m "Add refund abuse detection policy"`

5. **AI generates code** (from AISD)
   - Load AISD doc into context
   - Generate validation, database schema, emails

**Key insight**: You're not writing AISD manually. AI is writing it based on your requirements.

---

## When to Use AISD

### Primary Use: AI-Generated Documentation

**AISD docs are AI-authored from human input**:

| Human Input | AI Generates AISD | AI Uses AISD For |
|-------------|-------------------|------------------|
| Policy requirements | Business rules doc | Code generation, validation |
| Design discussion | Architecture decision | Implementation guidance |
| Feature request | Behavioral spec | Test generation, code |
| Integration needs | Integration patterns | Anti-corruption layers |

**Key**: Humans describe intent. AI writes AISD. Humans review diffs.

### Use Cases

**1. Requirements → Specifications**

Human describes policy in natural language (issue, doc, conversation).

AI generates structured AISD spec.

Human reviews git diff, approves.

AI generates code from AISD spec.

**2. Token-Efficient Summaries (When Beneficial)**

Machine-readable formats (OpenAPI, DDL, TypeScript) are verbose (designed for tooling, not AI).

AI can generate AISD summaries when:
- Source format is very large
- Summary provides clear token savings
- Navigation/discovery benefit is obvious

**Process**:
1. Test: Compare source format size vs AISD summary size
2. Measure: Only create if benefit is clear
3. Automate: Must be auto-generated, not hand-maintained

**Critical**:
- Source formats remain authoritative
- Only create AISD summaries when benefit is proven
- Never hand-write AISD for APIs/schemas (use OpenAPI/TypeScript directly)

**3. Documentation Without Alternatives**

When no executable format exists:
- Business rules and constraints
- Architecture decisions (ADRs)
- Integration patterns
- Cross-cutting concerns

AI generates AISD as primary format.

### AI-Mediated Understanding

**Humans don't read AISD directly. AI explains it to them.**

Common workflow (Cursor, Claude Code):
- Human: "Why can users only get 3 refunds per year?"
- AI loads `docs/refunds/business-rules.md`
- AI explains: "Fraud prevention. Policy set to FORBIDDEN if >3 refunds in 12 months."

**Why better than reading code**:
- AI reading 10,000 lines of code makes mistakes (old comments, bugs, assumptions)
- AI reading 500 lines of AISD gives accurate answers (authoritative, current)

**Result**: AISD enables "talk to your codebase" without hallucinations.

### Not AISD

**Human-targeted content**:
- Tutorials (teaching, not specs)
- Marketing (persuasion, not facts)
- Onboarding (narrative, not structured)

**Why**: These require human voice and persuasive structure, not factual specs.

---

## Validation

### Optional Automated Checks

```bash
# Line count check
wc -l docs/**/*.md | awk '$1 > 500 {print $2 ": " $1 " lines (max 500)"}'

# Average line length check (max 40 chars/line, non-empty lines)
for file in docs/**/*.md; do
  non_empty=$(grep -c '[^[:space:]]' "$file")
  chars=$(wc -c < "$file")
  avg=$(( chars / non_empty ))
  [ $avg -gt 40 ] && echo "$file: $avg chars/line (max 40)"
done

# Forbidden words
grep -rn "should\|might\|could\|typically\|usually" docs/ --include="*.md"
```

### Pre-commit Hook

Add to `.git/hooks/pre-commit`:

```bash
#!/bin/bash
set -e

echo "Checking AISD docs..."

# Check for forbidden words in staged docs
if git diff --cached --name-only | grep '\.md$' | xargs grep -n "should\|might\|could\|typically\|usually" 2>/dev/null; then
  echo "❌ ERROR: Found forbidden words in docs"
  echo "Use MUST/REQUIRED/FORBIDDEN instead"
  exit 1
fi

# Check line counts
git diff --cached --name-only | grep '\.md$' | while read file; do
  lines=$(wc -l < "$file")
  if [ $lines -gt 500 ]; then
    echo "⚠️  WARNING: $file has $lines lines (max 500)"
  fi
done

# Check average line length (max 40 chars/line, non-empty)
git diff --cached --name-only | grep '\.md$' | while read file; do
  non_empty=$(grep -c '[^[:space:]]' "$file" || echo 1)
  chars=$(wc -c < "$file")
  avg=$(( chars / non_empty ))
  if [ $avg -gt 40 ]; then
    echo "⚠️  WARNING: $file has $avg chars/line (max 40)"
  fi
done

echo "✅ Docs OK"
```

---

## Philosophy

**AI-authored documentation as intermediate representation between human intent and generated code.**

Humans describe requirements. AI writes structured specs. Humans review diffs. AI generates code from specs.

---

**Next**: Read [style-guide.md](style-guide.md) for writing rules and templates.
