# CLAUDE.md

Guidance for Claude Code working in this repository.

## Repository Overview

**AISD (AI Small Docs)** - AI-authored, human-reviewed documentation format.

**Philosophy**: AI writes docs from human requirements. Humans review diffs. AI generates code from docs.

**Status**: Early stage, no empirical evidence. Core idea: AISD is intermediate representation between human intent and generated code.

## Repository Structure

Documentation-only repository. No source code. All Markdown:

```
.
├── README.md           # Overview, philosophy, when to use
├── style-guide.md      # Writing principles, validation
├── best-practices.md   # File organization, context loading
└── roadmap.md          # Future work, honest assessment
```

## AISD Principles (Apply to All Files)

**Language**:
- MUST/REQUIRED/FORBIDDEN (never should/might/could/typically/usually)
- Every word justifies existence
- Explicit constraints ("1-200 chars" not "short")
- Tables/lists/code blocks (not prose)
- No "why" - document WHAT and WHEN only
- If writing nothing = writing something, write nothing

**File size**:
- Index: <100 lines
- Spec: 200-500 lines
- Target: 40 chars/line (non-empty)
- Targets, not limits. Optimize for AI comprehension.

**Format**:
- One concept per file
- H1 → H2 → H3 (never skip levels)
- Relative paths only

## Validation

**Forbidden words**:
```bash
grep -rn "should\|might\|could\|typically\|usually" . --include="*.md"
```

**Line counts**:
```bash
wc -l *.md | awk '$1 > 500 {print $2 ": " $1}'
```

**Avg line length**:
```bash
for file in *.md; do
  non_empty=$(grep -c '[^[:space:]]' "$file")
  chars=$(wc -c < "$file")
  avg=$(( chars / non_empty ))
  [ $avg -gt 40 ] && echo "$file: $avg chars/line"
done
```

## Scope

### Primary Use: AI-Authored Specs

**AISD docs are generated by AI from human requirements**:

| Human Input | AI Generates | Purpose |
|-------------|--------------|---------|
| Policy requirements | Business rules | Code generation |
| Design discussion | Architecture ADRs | Implementation guidance |
| Feature request | Behavioral spec | Test + code generation |

**Key**: Humans write natural language. AI writes AISD. Humans review diffs.

### Use Cases

**1. Documentation without dedicated formats**:
- Business rules, ADRs, integration patterns, behavioral specs

**2. Token-efficient summaries (when beneficial)**:
- AI generates AISD summaries from OpenAPI/DDL only when benefit is clear
- Test and measure: Only create if token savings are proven
- Source formats remain authoritative, AISD is derived

**3. Not AISD**:
- Tutorials, marketing, onboarding (human-targeted content, not AI-targeted)

## Content Rules

**Include**:
- Documentation principles and guidelines
- Templates (architecture ADRs, business rules)
- File organization patterns
- Honest assessment (what works, what doesn't)
- Roadmap (unproven claims needing validation)

**Exclude**:
- Source code (principles only)
- Prescriptive rules (collaborative, not rigid)
- Unvalidated claims (acknowledge uncertainty)
- Completed roadmap items (Git = history, roadmap = future)

## Common Tasks

### Add Template (TODO)

**Note**: Templates are currently marked as TODO and will be AI-generated in the future.

1. Create in [templates/](templates/)
2. Use tables, MUST/REQUIRED, conciseness
3. Keep under 500 lines
4. Mark "Core" (proven) or "Experimental" (unproven)
5. Add to [templates/index.md](templates/index.md)

### Update Core Docs

1. Edit [README.md](README.md), [style-guide.md](style-guide.md), [best-practices.md](best-practices.md)
2. Use tables, explicit constraints, no prose
3. Add ❌ bad and ✅ good examples
4. Keep testable and measurable
5. Validate (line length, forbidden words)

### Update Roadmap

1. Edit [roadmap.md](roadmap.md)
2. Add future work only
3. Remove completed items (Git tracks history)
4. Be honest (unproven claims, gaps)
5. Prioritize: Critical → High → Medium → Low → Research

## Key Principles

1. **AI-authored** - Docs generated by AI, reviewed by humans
2. **Intermediate representation** - Bridge between human intent and code
3. **Self-compliance** - Follow own rules
4. **Honest** - Acknowledge uncertainty
5. **Focused** - Business rules/ADRs (not replacing OpenAPI/DDL)
6. **Git-reviewed** - Humans approve AI-generated diffs
7. **Context optimized** - File sizes for AI loading

## Critical Gaps

**No evidence**:
- No before/after AI tests
- No token efficiency data
- No proof 40 chars/line or 200-500 lines matter
- No multi-model testing

**Over-engineered**:
- Domain isolation (too DDD-focused?)
- Templates too comprehensive (conflicts with conciseness)
- Context assumptions outdated (200k+ token models)

**Next step**: Build todo app with AISD + traditional docs, test AI generation, measure results.

## Files

| File | Purpose |
|------|---------|
| [README.md](README.md) | Philosophy, principles, when to use |
| [style-guide.md](style-guide.md) | Writing principles, validation |
| [best-practices.md](best-practices.md) | File structure, context loading |
| [templates/](templates/) | TODO - Templates to be created |
| [roadmap.md](roadmap.md) | Future work, gaps, priorities |

## Tone

**Collaborative**:
- Use "Consider", "Target", "Example"
- Not "MUST", "Standard", "Enforce"
- Acknowledge uncertainty
- Invite community validation
- Focus proven value, admit unproven

**Exception**: Within docs (not meta-docs), use MUST/REQUIRED per AISD.
